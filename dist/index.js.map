{"version":3,"file":"index.js","sources":["../src/tools.js","../src/ts-declare-generator.js","../src/meta/generator.js","../src/meta/clear.js","../src/http-serve.js","../src/deal-scripts-dependencies.js","../src/compile.js","../src/doc.js","../src/pack.js"],"sourcesContent":["/**\n * Created by rockyl on 2018/7/5.\n */\n\nimport {spawn} from 'child_process';\nimport crypto from 'crypto';\nimport fs from \"fs\";\n\nexport function exit(err, code = 1) {\n\tconsole.error(err);\n\tprocess.exit(code);\n}\n\nexport function childProcess(cmd, params, cwd, printLog = true) {\n\tlet options = {};\n\tif (cwd) {\n\t\toptions.cwd = cwd;\n\t}\n\tconst proc = spawn(cmd, params, options);\n\n\tif (printLog) {\n\t\tproc.stdout.on('data', (data) => {\n\t\t\tlet txt = data.toString();\n\t\t\ttxt = txt.substr(0, txt.length - 1);\n\t\t\tconsole.log(txt);\n\t\t});\n\n\t\tproc.stderr.on('data', (data) => {\n\t\t\tconsole.log(data.toString());\n\t\t});\n\t}\n\n\treturn proc;\n}\n\nexport function childProcessSync(cmd, params, cwd, printLog = true) {\n\treturn new Promise((resolve, reject) => {\n\t\tlet proc = childProcess(cmd, params, cwd, printLog);\n\n\t\tproc.on('close', (code) => {\n\t\t\tif (code === 0) {\n\t\t\t\tresolve();\n\t\t\t} else {\n\t\t\t\treject(code);\n\t\t\t}\n\t\t});\n\t});\n}\n\nexport function gitClone(url, path) {\n\treturn childProcessSync('git', ['clone', url, path]);\n}\n\nexport function npmInstall(path) {\n\treturn childProcessSync('npm', ['i'], path);\n}\n\nexport function npmRun(path, scriptName) {\n\treturn childProcessSync('npm', ['run', scriptName], path);\n}\n\nexport function getMd5(fileOrBuffer) {\n\tlet buffer = fileOrBuffer;\n\tif (typeof fileOrBuffer === 'string') {\n\t\tbuffer = fs.readFileSync(fileOrBuffer);\n\t}\n\n\tlet hash = crypto.createHash('md5');\n\thash.update(buffer);\n\treturn hash.digest('hex');\n}\n","/**\n * Created by rockyl on 2020-03-18.\n */\n\nconst ts = require('typescript');\nconst fs = require('fs');\n\nconst {\n\tClassDeclaration, EnumDeclaration, ExportKeyword, DefaultKeyword,\n\tPropertyDeclaration, MethodDeclaration,\n\tTypeReference, AnyKeyword, NumberKeyword, StringKeyword, BooleanKeyword,\n\tNumericLiteral, StringLiteral, TrueKeyword, FalseKeyword,\n\tPrivateKeyword, ProtectedKeyword, StaticKeyword,\n\tNewExpression, PropertyAccessExpression, ObjectLiteralExpression, ArrayLiteralExpression,\n} = ts.SyntaxKind;\n\nconst filterModifiers = [PrivateKeyword, ProtectedKeyword, StaticKeyword,];\nconst filterDecorators = ['hidden'];\nconst filterNamePrefix = ['_', '$'];\n\nconst typeMapping = {\n\t[AnyKeyword]: 'any',\n\t[NumberKeyword]: 'number',\n\t[StringKeyword]: 'string',\n\t[BooleanKeyword]: 'boolean',\n};\n\nconst defaultTypeMapping = {\n\t[NumericLiteral]: 'number',\n\t[StringLiteral]: 'string',\n\t[TrueKeyword]: 'boolean',\n\t[FalseKeyword]: 'boolean',\n};\n\nconst editorInstructs = ['if'];\n\nconst vector2Properties = ['x', 'y'];\n\nexport function generateDeclaration(scriptFile) {\n\tlet code = fs.readFileSync(scriptFile, 'utf-8');\n\tconsole.time('parse');\n\tlet sourceFile = ts.createSourceFile('test.ts', code, ts.ScriptTarget.ES2015);\n\tconsole.timeEnd('parse');\n\n\tlet enums = [];\n\tlet components = [];\n\tlet declaration;\n\tts.forEachChild(sourceFile, function (node) {\n\t\tswitch (node.kind) {\n\t\t\tcase ClassDeclaration:\n\t\t\t\tif (\n\t\t\t\t\tnode.modifiers && node.modifiers.length >= 2 &&\n\t\t\t\t\tnode.modifiers[0].kind === ExportKeyword &&\n\t\t\t\t\tnode.modifiers[1].kind === DefaultKeyword\n\t\t\t\t) {\n\t\t\t\t\tlet props = [];\n\t\t\t\t\tlet methods = [];\n\t\t\t\t\tdeclaration = {\n\t\t\t\t\t\tname: node.name.text,\n\t\t\t\t\t\tprops,\n\t\t\t\t\t\tmethods,\n\t\t\t\t\t};\n\t\t\t\t\tputComment(node, declaration);\n\n\t\t\t\t\tlet prop;\n\t\t\t\t\tfor (let member of node.members) {\n\t\t\t\t\t\tlet name = member.name.text;\n\t\t\t\t\t\tif (filterMember(member, name)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tswitch (member.kind) {\n\t\t\t\t\t\t\tcase PropertyDeclaration:\n\t\t\t\t\t\t\t\tprop = getProp(member);\n\t\t\t\t\t\t\t\tputEditorTag(member, prop);\n\t\t\t\t\t\t\t\tif (prop.type && prop.type !== 'any') {\n\t\t\t\t\t\t\t\t\tprops.push(prop);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase MethodDeclaration:\n\t\t\t\t\t\t\t\tlet method = {\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tputComment(member, method);\n\t\t\t\t\t\t\t\tif (member.parameters && member.parameters.length > 0) {\n\t\t\t\t\t\t\t\t\tlet parameters = method.parameters = [];\n\t\t\t\t\t\t\t\t\tfor (let parameter of member.parameters) {\n\t\t\t\t\t\t\t\t\t\tlet p = getProp(parameter);\n\t\t\t\t\t\t\t\t\t\tif (parameter.questionToken) {\n\t\t\t\t\t\t\t\t\t\t\tp.optional = true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tparameters.push(p);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmethods.push(method);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tcomponents.push(declaration);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase EnumDeclaration:\n\t\t\t\tlet members = [];\n\t\t\t\tdeclaration = {\n\t\t\t\t\tname: node.name.text,\n\t\t\t\t\tmembers,\n\t\t\t\t};\n\t\t\t\tputComment(node, declaration);\n\n\t\t\t\tfor (let member of node.members) {\n\t\t\t\t\tlet item = {\n\t\t\t\t\t\tlabel: member.name.text,\n\t\t\t\t\t};\n\t\t\t\t\tlet defaultValue = getDefaultValue(member);\n\t\t\t\t\tif (defaultValue) {\n\t\t\t\t\t\titem.value = defaultValue.value;\n\t\t\t\t\t}\n\t\t\t\t\tputComment(member, item);\n\t\t\t\t\tmembers.push(item);\n\t\t\t\t}\n\n\t\t\t\tenums.push(declaration);\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn null;\n\t});\n\n\tlet result = {};\n\tif (enums.length > 0) {\n\t\tresult.enums = enums;\n\t}\n\tif (components.length > 0) {\n\t\tresult.components = components;\n\t}\n\treturn result;\n}\n\nfunction filterMember(node, name) {\n\tlet skip = false;\n\tfor (let prefix of filterNamePrefix) {\n\t\tif (name.startsWith(prefix)) {\n\t\t\tskip = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (!skip && node.modifiers) {\n\t\tfor (let modifier of node.modifiers) {\n\t\t\tif (filterModifiers.includes(modifier.kind)) {\n\t\t\t\tskip = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tif (!skip && node.decorators && node.decorators.length > 0) {\n\t\tfor (let decorator of node.decorators) {\n\t\t\tif (filterDecorators.includes(decorator.expression.text)) {\n\t\t\t\tskip = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn skip;\n}\n\nfunction getType(node) {\n\tif (node.type) {\n\t\tlet type = node.type;\n\t\tif (type.kind === TypeReference) {\n\t\t\treturn type.typeName.text;\n\t\t} else {\n\t\t\treturn typeMapping[type.kind];\n\t\t}\n\t}\n}\n\nfunction getDefaultValue(node, preType) {\n\tif (node.initializer) {\n\t\tlet value, type, init, initializer = node.initializer;\n\t\tswitch (initializer.kind) {\n\t\t\tcase NewExpression:\n\t\t\t\tswitch (preType) {\n\t\t\t\t\tcase 'Vector2':\n\t\t\t\t\t\tvalue = [];\n\t\t\t\t\t\tfor (let i = 0, li = initializer.arguments.length; i < li; i++) {\n\t\t\t\t\t\t\tconst argument = initializer.arguments[i];\n\t\t\t\t\t\t\tinit = getInitializer(argument);\n\t\t\t\t\t\t\tvalue.push(init.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase PropertyAccessExpression:\n\t\t\t\tif (initializer.expression) {\n\t\t\t\t\ttype = initializer.expression.text;\n\t\t\t\t}\n\t\t\t\tvalue = node.initializer.name.text;\n\t\t\t\tbreak;\n\t\t\tcase ArrayLiteralExpression: //数组暂时不识别\n\t\t\t\t//type = 'array';\n\t\t\t\tbreak;\n\t\t\tcase ObjectLiteralExpression:\n\t\t\t\tswitch (preType) {\n\t\t\t\t\tcase 'vector2':\n\t\t\t\t\t\tvalue = {};\n\t\t\t\t\t\tfor (let property of initializer.properties) {\n\t\t\t\t\t\t\tinit = getInitializer(property.initializer);\n\t\t\t\t\t\t\tlet field = property.name.escapedText;\n\t\t\t\t\t\t\tif (vector2Properties.includes(field)) {\n\t\t\t\t\t\t\t\tvalue[field] = init.value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tinit = getInitializer(initializer);\n\t\t\t\ttype = init.type;\n\t\t\t\tvalue = init.value;\n\t\t}\n\t\tlet dv = {\n\t\t\tvalue,\n\t\t};\n\t\tif (type !== undefined) {\n\t\t\tdv.type = type;\n\t\t}\n\t\treturn dv;\n\t}\n}\n\nfunction getInitializer(initializer) {\n\tlet value, type = defaultTypeMapping[initializer.kind];\n\tlet text = initializer.text;\n\tswitch (initializer.kind) {\n\t\tcase NumericLiteral:\n\t\t\tvalue = parseFloat(text);\n\t\t\tbreak;\n\t\tcase StringLiteral:\n\t\t\tvalue = text;\n\t\t\tbreak;\n\t\tcase TrueKeyword:\n\t\t\tvalue = true;\n\t\t\tbreak;\n\t\tcase FalseKeyword:\n\t\t\tvalue = false;\n\t\t\tbreak;\n\t}\n\n\treturn {type, value};\n}\n\nfunction getComment(node) {\n\tif (node.jsDoc) {\n\t\tlet jsDoc = node.jsDoc[node.jsDoc.length - 1];\n\t\treturn jsDoc.comment;\n\t}\n}\n\nfunction putComment(node, target) {\n\tlet c = getComment(node);\n\tif (c) {\n\t\ttarget.comment = c;\n\t}\n}\n\nfunction putEditorTag(node, target) {\n\tif (node.jsDoc) {\n\t\tlet jsDoc = node.jsDoc[node.jsDoc.length - 1];\n\t\tif (jsDoc.tags) {\n\t\t\tlet instructions = {};\n\t\t\tfor (let tag of jsDoc.tags) {\n\t\t\t\tlet tagName = tag.tagName.text;\n\t\t\t\tif (editorInstructs.includes(tagName)) {\n\t\t\t\t\tinstructions[tagName] = tag.comment;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (Object.keys(instructions).length > 0) {\n\t\t\t\ttarget.instructions = instructions;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction getProp(node) {\n\tlet name = node.name.text;\n\n\tlet type = getType(node);\n\tlet defaultValue = getDefaultValue(node, type);\n\tif (!type) {\n\t\tif (defaultValue && defaultValue.hasOwnProperty('type')) {\n\t\t\ttype = defaultValue.type;\n\t\t} else {\n\t\t\ttype = 'any';\n\t\t}\n\t}\n\n\tlet prop = {\n\t\tname,\n\t\ttype,\n\t};\n\tif (defaultValue && defaultValue.hasOwnProperty('value')) {\n\t\tprop.default = defaultValue.value;\n\t}\n\tputComment(node, prop);\n\treturn prop;\n}\n","/**\n * Created by rockyl on 2020-03-16.\n */\n\nimport glob from 'glob'\nimport chalk from 'chalk'\nimport fs from 'fs'\nimport {v4 as generateUUID} from \"uuid\"\nimport chokidar from 'chokidar'\nimport {exit, getMd5} from \"../tools\";\nimport {generateDeclaration} from \"../ts-declare-generator\";\n\nlet t;\n\nexport function generateMetaFiles(watch = false) {\n\tif (fs.existsSync('assets')) {\n\t\tif (watch) {\n\t\t\tconsole.log(chalk.blue('start watch assets folder to generate meta files'));\n\t\t\tchokidar.watch('assets').on('all', (event, path) => {\n\t\t\t\t//console.log(event, path);\n\t\t\t\tif (t) {\n\t\t\t\t\tclearTimeout(t);\n\t\t\t\t\tt = null;\n\t\t\t\t}\n\t\t\t\tt = setTimeout(executeOnce, 200);\n\t\t\t});\n\t\t} else {\n\t\t\texecuteOnce();\n\t\t\tconsole.log(chalk.cyan('generate meta files successfully'));\n\t\t}\n\t} else {\n\t\texit('assets folder not exists', 1);\n\t}\n}\n\nfunction executeOnce() {\n\tlet files = glob.sync('assets/**/!(*.meta)');\n\n\tfor (let file of files) {\n\t\tif (!fs.existsSync(file + '.meta')) {\n\t\t\tgenerateMetaFile(file);\n\t\t}\n\t}\n\n\tlet tsFiles = glob.sync('assets/**/*.ts');\n\tconsole.time('generateDeclaration>');\n\tfor (let file of tsFiles) {\n\t\tlet meta = JSON.parse(fs.readFileSync(file + '.meta', 'utf-8'));\n\t\tlet md5 = getMd5(file);\n\t\tif (meta.md5 !== md5) {\n\t\t\tmeta.declaration = generateDeclaration(file);\n\t\t\tmeta.md5 = md5;\n\n\t\t\tsaveMetaFile(file, meta);\n\t\t}\n\t}\n\tconsole.timeEnd('generateDeclaration>');\n}\n\nexport function generateMetaFile(file) {\n\tlet meta = {\n\t\tver: '1.0.1',\n\t\tuuid: generateUUID(),\n\t};\n\n\tsaveMetaFile(file, meta);\n\n\tconsole.log(chalk.green('generate ' + file + '.meta'));\n\n\treturn meta;\n}\n\nfunction saveMetaFile(file, meta){\n\tfs.writeFileSync(file + '.meta', JSON.stringify(meta, null, '\\t'));\n}\n","/**\n * Created by rockyl on 2020-03-17.\n */\n\nimport glob from 'glob'\nimport chalk from 'chalk'\nimport fs from 'fs'\nimport {exit} from \"../tools\";\n\nexport function clearMetaFiles() {\n\tif (fs.existsSync('assets')) {\n\t\texecuteOnce();\n\t\tconsole.log(chalk.cyan('clear meta files successfully'));\n\t} else {\n\t\texit('assets folder not exists', 1);\n\t}\n}\n\nfunction executeOnce() {\n\tlet files = glob.sync('assets/**/*.meta');\n\n\tfor (let file of files) {\n\t\tlet bodyFile = file.replace('.meta', '');\n\t\tif (!fs.existsSync(bodyFile)) {\n\t\t\tfs.unlinkSync(file);\n\t\t\tconsole.log(chalk.green('remove ' + file + '.meta'));\n\t\t}\n\t}\n}\n","/**\n * Created by rockyl on 2020-03-17.\n */\n\nimport path from 'path'\nimport fs from 'fs'\nimport chalk from 'chalk'\nimport serveHandler from 'serve-handler'\nimport http from 'http'\nimport https from 'https'\n\nlet publicPath;\n\nfunction handler(request, response) {\n\treturn serveHandler(request, response, {\n\t\tpublic: publicPath,\n\t\theaders: [\n\t\t\t{\n\t\t\t\tsource: '**/*',\n\t\t\t\theaders: [\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'Access-Control-Allow-Origin', value: '*',\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n}\n\nexport function startHttpServe(options) {\n\tconsole.log(chalk.green('launching...'));\n\treturn new Promise((resolve, reject) => {\n\t\tconst {port, host, folder, keyFile, certFile} = options;\n\n\t\tpublicPath = path.resolve(folder);\n\t\tif (fs.existsSync(publicPath)) {\n\t\t\tlet sslOpts;\n\t\t\tif (keyFile && certFile) {\n\t\t\t\tconst keyContent = fs.readFileSync(keyFile, 'utf8'),\n\t\t\t\t\tcertContent = fs.readFileSync(certFile, 'utf8');\n\n\t\t\t\tif (keyContent && certContent) {\n\t\t\t\t\tsslOpts = {\n\t\t\t\t\t\tkey: keyContent,\n\t\t\t\t\t\tcert: certContent\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst server = sslOpts ? https.createServer(sslOpts, handler) : http.createServer(handler);\n\n\t\t\tserver.on('error', (err) => {\n\t\t\t\tconsole.log(chalk.red(err.message));\n\t\t\t\treject(err.message);\n\t\t\t});\n\n\t\t\tserver.listen(port, host, function () {\n\t\t\t\tlet isSSL = !!sslOpts;\n\t\t\t\tconst schema = isSSL ? 'https' : 'http';\n\n\t\t\t\tconsole.log(chalk.blue(`${schema} server start at ${schema}://${host}:${port}`));\n\t\t\t\tconsole.log(chalk.blue(`${schema} path: ${publicPath}`));\n\n\t\t\t\tresolve({\n\t\t\t\t\thost, port, publicPath, isSSL,\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.log(chalk.red('Public path is not exist: ' + publicPath));\n\t\t\treject('Public path is not exist: ' + publicPath)\n\t\t}\n\t})\n}\n","/**\n * Created by rockyl on 2020-03-16.\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst glob = require('glob');\n\nconst targetId = 'register-scripts';\n\nfunction getModuleName(file) {\n\tlet metaFile = file + '.meta';\n\tif(!fs.existsSync(metaFile)){\n\t\treturn;\n\t}\n\tlet metaContent = JSON.parse(fs.readFileSync(metaFile, 'utf-8'));\n\tlet fileContent = fs.readFileSync(file, 'utf-8');\n\tlet result = fileContent.match(/export default class (\\w+)/);\n\n\tif (result) {\n\t\treturn metaContent.uuid;\n\t}\n}\n\nfunction getScripts() {\n\tlet files = glob.sync('./assets/**/*.ts');\n\n\tlet scriptsImportList = [];\n\tlet scriptsList = [];\n\tfor (let i = 0, li = files.length; i < li; i++) {\n\t\tconst file = files[i];\n\t\tlet moduleName = getModuleName(file);\n\t\tif (moduleName) {\n\t\t\tlet localModuleName = '/' + path.relative('./assets', file).replace('.ts', '');\n\t\t\tscriptsImportList.push(`import {default as script_${i}} from \"${file}\";`);\n\t\t\tscriptsList.push(`'${moduleName}': script_${i},`);\n\t\t\tscriptsList.push(`'${localModuleName}': script_${i},`);\n\t\t}\n\t}\n\n\treturn `\n${scriptsImportList.join('\\n')}\n\nexport default function register(app) {\n\tapp.registerComponentDefs({\n${scriptsList.join('\\n')}\n\t});\n}\n`;\n}\n\nexport function dealScriptsDependencies(options) {\n\treturn {\n\t\tname: 'deal-scripts-dependencies',\n\n\t\tresolveId(id) {\n\t\t\tif (id === targetId) {\n\t\t\t\treturn id;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tload(id) {\n\t\t\tif (id === targetId) {\n\t\t\t\treturn getScripts();\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t}\n\n}\n","/**\n * Created by rockyl on 2020-03-18.\n */\n\nimport fs from 'fs'\nimport rollup from 'rollup'\nimport typescript from 'typescript'\nimport rpt from 'rollup-plugin-typescript';\nimport {uglify} from 'rollup-plugin-uglify';\nimport resolve from '@rollup/plugin-node-resolve';\nimport commonjs from '@rollup/plugin-commonjs';\nimport json from '@rollup/plugin-json';\nimport {dealScriptsDependencies} from \"./deal-scripts-dependencies\";\nimport chalk from \"chalk/source\";\nimport {exit} from \"./tools\";\nimport chokidar from \"chokidar\";\n\nconst devOutputFile = 'debug/index.js';\nconst prodOutputFile = 'debug/index.min.js';\n\nconst defaultOptions = {\n\tprod: false,\n\texternals: {\n\t\tqunity: 'qunity',\n\t},\n};\n\nconst adaptorExternalMap = {\n\tpixi: {\n\t\t'pixi.js': 'PIXI',\n\t\t'qunity-pixi': 'qunity-pixi',\n\t}\n};\n\nconst inputFile = 'src/index.ts';\nlet t;\n\nexport async function compile(options, watch = false) {\n\tif (!fs.existsSync('src/index.ts')) {\n\t\texit(`file [${inputFile}] not exists`, 1);\n\t}\n\n\tif (options) {\n\t\toptions = Object.assign({}, defaultOptions, options);\n\t} else {\n\t\toptions = Object.assign({}, defaultOptions);\n\t}\n\n\tlet {name: moduleName, engine: adaptor, externals: manifestExternals} = options.manifest;\n\tlet {prod, outputFile} = options;\n\n\tif(!outputFile){\n\t\toutputFile = prod ? prodOutputFile : devOutputFile;\n\t}\n\n\tlet externals = adaptorExternalMap[adaptor];\n\n\tif (!externals) {\n\t\texit(`adaptor [${adaptor}] not exists`, 2);\n\t}\n\n\texternals = Object.assign({}, externals, defaultOptions.externals, manifestExternals);\n\n\tlet inputOptions = {\n\t\tinput: inputFile,\n\t\tplugins: [\n\t\t\tjson(),\n\t\t\tdealScriptsDependencies(),\n\t\t\tresolve({\n\t\t\t\tbrowser: true,\n\t\t\t}),\n\t\t\trpt({\n\t\t\t\ttypescript,\n\t\t\t\tinclude: ['src/**/*.ts+(|x)', 'assets/**/*.ts+(|x)']\n\t\t\t}),\n\t\t\tcommonjs(),\n\t\t],\n\t\texternal: Object.keys(externals),\n\t};\n\n\tif (prod) {\n\t\tinputOptions.plugins.push(uglify({}));\n\t}\n\n\tlet outputOptions = {\n\t\tfile: outputFile,\n\t\tformat: 'umd',\n\t\tname: moduleName,\n\t\tsourcemap: !prod,\n\t\tglobals: externals,\n\t};\n\n\tif (watch) {\n\t\tlet watchOptions = {\n\t\t\t...inputOptions,\n\t\t\toutput: outputOptions,\n\t\t};\n\t\tconst watcher = rollup.watch(watchOptions);\n\n\t\twatcher.on('event', event => {\n\t\t\tswitch (event.code) {\n\t\t\t\tcase 'START':\n\t\t\t\t\tconsole.log(chalk.cyan('start building...'));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'END':\n\t\t\t\t\tconsole.log(chalk.cyan('build project successfully'));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ERROR':\n\t\t\t\t\tconsole.warn(event);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// event.code 会是下面其中一个：\n\t\t\t//   START        — 监听器正在启动（重启）\n\t\t\t//   BUNDLE_START — 构建单个文件束\n\t\t\t//   BUNDLE_END   — 完成文件束构建\n\t\t\t//   END          — 完成所有文件束构建\n\t\t\t//   ERROR        — 构建时遇到错误\n\t\t\t//   FATAL        — 遇到无可修复的错误\n\t\t});\n\n\t\tchokidar.watch('assets', {\n\t\t\t//ignored: /^.+(?<!\\.ts)$/,\n\t\t\tignoreInitial: true,\n\t\t}).on('all', (event, path) => {\n\t\t\tif (event === 'add' && path.endsWith('.ts')) {\n\t\t\t\t//console.log(event, path);\n\t\t\t\tif (t) {\n\t\t\t\t\tclearTimeout(t);\n\t\t\t\t\tt = null;\n\t\t\t\t}\n\t\t\t\tt = setTimeout(modifyNeedCompile, 500);\n\t\t\t}\n\t\t});\n\t} else {\n\t\ttry {\n\t\t\tconst bundle = await rollup.rollup(inputOptions);\n\n\t\t\tawait bundle.write(outputOptions);\n\t\t\tconsole.log(chalk.cyan('build project successfully'));\n\t\t} catch (e) {\n\t\t\tconsole.warn(e);\n\t\t\texit('build project failed', 1);\n\t\t}\n\t}\n}\n\nfunction modifyNeedCompile() {\n\tlet content = fs.readFileSync('src/need-compile.ts');\n\tfs.writeFileSync('src/need-compile.ts', content);\n}\n","/**\n * Created by rockyl on 2020-05-12.\n */\n\nexport function getDoc(source) {\n\tfunction requireMethod(id) {\n\t\tif (id === 'qunity') {\n\t\t\treturn {\n\t\t\t\tDoc: function () {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tkv: function (args) {\n\t\t\t\t\t\t\treturn args;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tlet func = new Function('require', 'exports', source);\n\tlet exports = {};\n\tfunc(requireMethod, exports);\n\treturn exports.doc;\n}\n","/**\n * Created by rockyl on 2020-05-12.\n *\n * pack project\n */\n\nimport path from \"path\";\nimport fs from \"fs-extra\";\nimport glob from \"glob\";\nimport {compile} from \"./compile\";\nimport {getDoc} from \"./doc\";\nimport {packImages} from \"./sheet-pack\";\n\nconst releasePath = 'dist';\nconst assetProtocol = 'asset://';\n\nexport async function pack(options) {\n\tif (!fs.existsSync('manifest.json')) {\n\t\texit(`file [manifest.json] not exists`, 1);\n\t}\n\tlet manifest = JSON.parse(fs.readFileSync('manifest.json'));\n\n\tlet releaseVersion = options.releaseVersion || Date.now().toString();\n\tlet projectReleasePath = path.join(releasePath, releaseVersion);\n\tawait fs.ensureDir(projectReleasePath);\n\n\t//const bundleFile = await compileBundle(options, manifest, projectReleasePath);\n\n\tawait packSheets(projectReleasePath);\n\t//await parseIndexHtml(projectReleasePath, bundleFile);\n\t//await copyFiles(projectReleasePath);\n}\n\nasync function compileBundle(options, manifest, projectReleasePath) {\n\tlet bundleFile = path.join(projectReleasePath, 'index.min.js');\n\tlet compileOptions = {\n\t\tprod: options.prod,\n\t\toutputFile: bundleFile,\n\t\tmanifest,\n\t};\n\tawait compile(compileOptions);\n\n\treturn bundleFile;\n}\n\nfunction assetsTokenFilter(token) {\n\treturn token.type === 'String' && token.value.startsWith('\\'' + assetProtocol);\n}\n\nasync function packSheets(projectReleasePath) {\n\tlet assetsPath = 'assets';\n\tlet projectReleaseAssetsPath = path.join(projectReleasePath, 'assets');\n\tawait fs.ensureDir(projectReleaseAssetsPath);\n\n\tlet sceneFiles = glob.sync(assetsPath + '/**/*.scene');\n\n\tfor (let sceneFile of sceneFiles) {\n\t\tlet sceneContent = await fs.readFile(sceneFile, 'utf-8');\n\t\tlet doc = getDoc(sceneContent);\n\t\tlet assets = doc.assets;\n\t\tlet files = assets.map(asset => asset.url).filter(asset => asset.endsWith('.png'));\n\t\tlet {sheets, singles} = await packSheet(files, {maxSize: 512});\n\n\t\t//console.log(assets, sheets, singles);\n\t\tlet sheetIndex = 0;\n\t\tfor (let {frames, buffer} of sheets) {\n\t\t\tlet keys = Object.keys(frames);\n\t\t\tfor (let url of keys) {\n\t\t\t\tlet asset = assets.find(asset => asset.url === url);\n\t\t\t\tif (asset) {\n\t\t\t\t\tlet relativePath = path.relative('assets', url);\n\t\t\t\t\tframes[relativePath] = frames[url];\n\t\t\t\t\tdelete frames[url];\n\n\t\t\t\t\tframes[relativePath].uuid = asset.uuid;\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait fs.writeFile(path.join(projectReleaseAssetsPath, 'sheet_' + sheetIndex + '.sht'), JSON.stringify(frames));\n\t\t\tawait fs.writeFile(path.join(projectReleaseAssetsPath, 'sheet_' + sheetIndex + '.png'), buffer);\n\t\t\tsheetIndex++;\n\t\t}\n\t\tfor(let single of singles){\n\t\t\tawait fs.copy(single, path.join(projectReleasePath, single))\n\t\t}\n\t}\n}\n\nasync function parseIndexHtml(projectReleasePath, bundleFile) {\n\tlet indexTemplate = await fs.readFile('index.html', 'utf-8');\n\tlet indexContent = indexTemplate.replace('debug/index.js', path.relative(projectReleasePath, bundleFile));\n\n\tawait fs.writeFile(path.join(projectReleasePath, 'index.html'), indexContent);\n}\n\nasync function copyFiles(projectReleasePath) {\n\tawait fs.copyFile('index.html', path.join(projectReleasePath, 'index.html'));\n}\n"],"names":["exit","spawn","fs","crypto","glob","generateUUID","executeOnce","path","t","uglify","chalk"],"mappings":"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"}